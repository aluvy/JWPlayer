# Floating Player Events

The player allows for a user to update the floating state of the player dynamically.

<br>

## .on('float')

Fires when a floating player starts and stops floating

### 호출시점

- 플레이어가 **플로팅(floating) 상태로 전환되거나 해제될 때** 발생합니다.
- “플로팅 상태”란, 사용자가 페이지를 스크롤하거나 뷰포트 밖으로 벗어났을 때
  플레이어가 화면 한쪽(주로 하단 모서리)에 **작게 고정된 미니 플레이어**로 바뀌는 상태를 말합니다.
- 즉, 다음 두 시점에서 각각 한 번씩 호출됩니다:
  - **플로팅 시작 시**: 일반 모드 → 플로팅 모드 진입
  - **플로팅 해제 시**: 플로팅 모드 → 일반 모드 복귀

### 이벤트 객체 구조 (콜백 파라미터)

```json
{
  "floating": true,
  "type": "float"
}
```

| Value                  | Description                                       |
| :--------------------- | :------------------------------------------------ |
| **floating** (boolean) | `true` = 플로팅 모드 진입 / `false` = 플로팅 해제 |

### 활용

#### 1. UI 상태 반영

- 플레이어가 플로팅 모드로 전환될 때 페이지 스타일(레이아웃, 배경, 썸네일 등) 변경 가능.

#### 2. 사용자 행동 트래킹

- 플로팅 상태 진입 빈도, 체류 시간, 해제 시점 등을 추적하여  
  **시청 지속률 / 몰입도 분석**에 활용 가능.

#### 3. 광고 노출 제어

- 플로팅 상태에서는 광고 노출 빈도를 다르게 적용하거나  
  오버레이 광고 크기를 축소하는 로직 적용 가능.

#### 4. UX 제어

- 플로팅 진입 시 오디오만 재생, 영상 크기 축소 등 **미디어 집중 모드** 제어.

### 주의사항

- float 이벤트는 **플로팅 기능(floating: { ... })이 활성화된 경우에만 발생**합니다.  
  설정 예:

```javascript
player.setup({
  playlist: '...',
  floating: { dismissible: true, mode: 'notVisible' },
});
```

- 플로팅 기능이 비활성화되어 있거나, 뷰포트 감시(IntersectionObserver 등)가 지원되지 않는 환경에서는 발생하지 않습니다.
- 이벤트가 발생했다고 해서 DOM 위치를 직접 제어해야 하는 것은 아님 -  
  플레이어 내부 로직에 의해 자동으로 CSS 포지션이 변경됩니다.
- 스크롤·뷰포트 전환이 빠르게 일어날 때 float 이벤트가 연속으로 호출될 수 있으므로  
  중복 UI 업데이트 방지 로직 권장.
- 모바일 브라우저에서는 OS UI 레이아웃 구조상 플로팅이 제한되거나 비활성화될 수 있습니다.

### 특징

- **플레이어의 시각적 상태 변화(floating ↔ normal)를 감지할 수 있는 유일한 이벤트**.
- `floating: true` 시점은 UI 전환, 트래킹, 광고 제어의 핵심 타이밍으로 사용됨.
- `beforePlay`, `beforeComplete` 처럼 **상태 전이 중심 이벤트 그룹** 중 하나.
- 이벤트 데이터가 단순(`{ floating, type }`)하여 가벼우며, 실시간 UI 반응에 적합함.
